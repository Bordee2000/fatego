{"remainingRequest":"C:\\Users\\Bordee\\Desktop\\Work KMITL\\Work 2.2\\web\\WEEK12-EXERCISE-master\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Bordee\\Desktop\\Work KMITL\\Work 2.2\\web\\WEEK12-EXERCISE-master\\frontend\\src\\views\\blogs\\CreateBlog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Bordee\\Desktop\\Work KMITL\\Work 2.2\\web\\WEEK12-EXERCISE-master\\frontend\\src\\views\\blogs\\CreateBlog.vue","mtime":1619156038000},{"path":"C:\\Users\\Bordee\\Desktop\\Work KMITL\\Work 2.2\\web\\WEEK12-EXERCISE-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Bordee\\Desktop\\Work KMITL\\Work 2.2\\web\\WEEK12-EXERCISE-master\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Bordee\\Desktop\\Work KMITL\\Work 2.2\\web\\WEEK12-EXERCISE-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Bordee\\Desktop\\Work KMITL\\Work 2.2\\web\\WEEK12-EXERCISE-master\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJsb2c6IHt9LAogICAgICBlcnJvcjogbnVsbCwKICAgICAgaW1hZ2VzOiBbXSwgLy8gYXJyYXkgb2YgaW1hZ2UKICAgICAgdGl0bGVCbG9nOiAiIiwKICAgICAgY29udGVudEJsb2c6ICIiLAogICAgICBwaW5uZWRCbG9nOiBmYWxzZSwKICAgICAgc3RhdHVzQmxvZzogInN0YXR1c19wdWJsaWMiLAogICAgICByZWZlcmVuY2U6ICIiLAogICAgICBzdGFydF9kYXRlOiAiIiwKICAgICAgZW5kX2RhdGU6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0SW1hZ2VzKGV2ZW50KSB7CiAgICAgIHRoaXMuaW1hZ2VzID0gZXZlbnQudGFyZ2V0LmZpbGVzOwogICAgfSwKICAgIHNob3dTZWxlY3RJbWFnZShpbWFnZSkgewogICAgICAvLyBmb3IgcHJldmlldyBvbmx5CiAgICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKGltYWdlKTsKICAgIH0sCiAgICBkZWxldGVTZWxlY3RJbWFnZShpbmRleCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLmltYWdlcyk7CiAgICAgIHRoaXMuaW1hZ2VzID0gQXJyYXkuZnJvbSh0aGlzLmltYWdlcyk7CiAgICAgIHRoaXMuaW1hZ2VzLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgc3VibWl0QmxvZygpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgidGl0bGUiLCB0aGlzLnRpdGxlQmxvZyk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiY29udGVudCIsIHRoaXMuY29udGVudEJsb2cpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoInBpbm5lZCIsIHRoaXMucGlubmVkQmxvZyA/IDEgOiAwKTsKICAgICAgLy8gZm9ybURhdGEuYXBwZW5kKCJyZWZlcmVuY2UiLCB0aGlzLnJlZmVyZW5jZSk7CiAgICAgIC8vIGZvcm1EYXRhLmFwcGVuZCgic3RhcnRfZGF0ZSIsIHRoaXMuc3RhcnRfZGF0ZSk7CiAgICAgIC8vIGZvcm1EYXRhLmFwcGVuZCgiZW5kX2RhdGUiLCB0aGlzLmVuZF9kYXRlKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJzdGF0dXMiLCB0aGlzLnN0YXR1c0Jsb2cpOwogICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKChpbWFnZSkgPT4gewogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgibXlJbWFnZSIsIGltYWdlKTsKICAgICAgfSk7CgogICAgICAvLyBOb3RlICoqKioqKioqKioqKioqKgogICAgICAvLyDguJXguK3guJnguYDguKPguLLguKLguLTguIcgUG9zdG1hbnQg4LiI4Liw4LmD4LiK4LmJIGZyb21EYXRhCiAgICAgIC8vIOC4leC4reC4meC4ouC4tOC4h+C4q+C4peC4suC4oiDguYYg4Lij4Li54Lib4Lie4Lij4LmJ4Lit4Lih4LiB4Lix4LiZ4LmD4LiZIFBvc3RtYW4g4LiI4Liw4LmA4Lib4LmH4LiZ4LmB4Lia4Lia4LiZ4Li14LmJCgogICAgICAvLyB0aXRsZSAgIHwgIlRoaXMgaXMgYSB0aXRsZSBvZiBibG9nIgogICAgICAvLyBjb21tZW50IHwgImNvbW1lbnQgaW4gYmxvZyIKICAgICAgLy8gLi4uCiAgICAgIC8vIG15SW1hZ2UgfCBbc2VsZWN0IGZpbGUgMV0KICAgICAgLy8gbXlJbWFnZSB8IFtzZWxlY3QgZmlsZSAyXQogICAgICAvLyBteUltYWdlIHwgW3NlbGVjdCBmaWxlIDNdCgogICAgICAvLyDguIjguLDguKrguLHguIfguYDguIHguJXguLjguKfguYjguLLguYPguIrguYkgbXlJbWFnZSDguYDguJvguYfguJkga2V5IOC5gOC4lOC4teC4ouC4p+C4geC4seC4mSDguYDguKXguKLguJXguYnguK3guIfguYDguK3guLLguKHguLIgbG9vcCBmb3JFYWNoCiAgICAgIC8vIOC4nuC4reC5hOC4m+C4neC4seC5iOC4hyBiYWNrZW5kIOC4oeC4seC4meC4iOC4sOC4iOC4seC4lCBmaWxlIOC5g+C4q+C5ieC5gOC4m+C5h+C4mSBBcnJheSDguYDguJ7guLfguYjguK3guYDguK3guLLguYTguJvguYPguIrguYnguIfguLLguJnguJXguYjguK3guYTguJTguYkKCiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9ibG9ncyIsIGZvcm1EYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnaG9tZSd9KSkKICAgICAgICAuY2F0Y2goKGUpID0+IGNvbnNvbGUubG9nKGUucmVzcG9uc2UuZGF0YSkpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["CreateBlog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateBlog.vue","sourceRoot":"src/views/blogs","sourcesContent":["<template>\n  <div class=\"container is-widescreen\">\n    <section class=\"section\" v-if=\"error\">\n      <div class=\"container is-widescreen\">\n        <div class=\"notification is-danger\">\n          <!-- <%= error.code + ': ' + error.sqlMessage %> -->\n          <!---->\n          {{ error }}\n        </div>\n      </div>\n    </section>\n    <section class=\"hero\">\n      <div class=\"hero-body\">\n        <p class=\"title\">Create new Blog</p>\n      </div>\n    </section>\n    <section class=\"px-6\">\n      <input\n        class=\"mb-5\"\n        multiple\n        type=\"file\"\n        accept=\"image/png, image/jpeg, image/webp\"\n        @change=\"selectImages\"\n      />\n\n      <div v-if=\"images\" class=\"columns is-multiline\">\n        <div v-for=\"(image, index) in images\" :key=\"image.id\" class=\"column is-one-quarter\">\n          <div class=\"card\">\n            <div class=\"card-image\">\n              <figure class=\"image is-4by3\">\n                <img :src=\"showSelectImage(image)\" alt=\"Placeholder image\" />\n              </figure>\n            </div>\n            <footer class=\"card-footer\">\n              <a @click=\"deleteSelectImage(index)\" class=\"card-footer-item has-text-danger\">Delete</a>\n            </footer>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"field mt-5\">\n        <label class=\"label\">Title</label>\n        <div class=\"control\">\n          <input v-model=\"titleBlog\" class=\"input\" type=\"text\" placeholder=\"Text input\" />\n        </div>\n      </div>\n\n      <div class=\"field\">\n        <label class=\"label\">Content</label>\n        <div class=\"control\">\n          <textarea v-model=\"contentBlog\" class=\"textarea\" placeholder=\"Textarea\"></textarea>\n        </div>\n      </div>\n      \n      <div class=\"field\">\n        <label class=\"label\">Reference</label>\n        <div class=\"control\">\n          <input class=\"input\" type=\"url\" v-model=\"reference\" placeholder=\"e.g. https://www.google.com\">\n        </div>\n      </div>\n\n      <div class=\"control mb-3\">\n        <label class=\"radio\">\n          <input v-model=\"statusBlog\" type=\"radio\" name=\"answer\" value=\"status_private\" />\n          Private\n        </label>\n        <label class=\"radio\">\n          <input v-model=\"statusBlog\" type=\"radio\" name=\"answer\" value=\"status_public\" />\n          Public\n        </label>\n      </div>\n\n      <div class=\"field\">\n        <div class=\"control\">\n          <label class=\"checkbox\">\n            <input v-model=\"pinnedBlog\" type=\"checkbox\" />\n            Pinned\n          </label>\n        </div>\n      </div>\n\n      <hr>\n\n      <div class=\"columns\">\n        <div class=\"column\">\n          <div class=\"field\">\n            <label class=\"label\">วันที่โพสต์</label>\n            <div class=\"control\">\n              <input class=\"input\" type=\"date\" v-model=\"start_date\">\n            </div>\n          </div>\n        </div>\n        <div class=\"column\">\n          <div class=\"field\">\n            <label class=\"label\">วันสิ้นสุดโพสต์</label>\n            <div class=\"control\">\n              <input class=\"input\" type=\"date\" v-model=\"end_date\">\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"field is-grouped\">\n        <div class=\"control\">\n          <button @click=\"submitBlog\" class=\"button is-link\">Submit</button>\n        </div>\n        <div class=\"control\">\n          <button @click=\"$router.go(-1)\" class=\"button is-link is-light\">Cancel</button>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      blog: {},\n      error: null,\n      images: [], // array of image\n      titleBlog: \"\",\n      contentBlog: \"\",\n      pinnedBlog: false,\n      statusBlog: \"status_public\",\n      reference: \"\",\n      start_date: \"\",\n      end_date: \"\"\n    };\n  },\n  methods: {\n    selectImages(event) {\n      this.images = event.target.files;\n    },\n    showSelectImage(image) {\n      // for preview only\n      return URL.createObjectURL(image);\n    },\n    deleteSelectImage(index) {\n      console.log(this.images);\n      this.images = Array.from(this.images);\n      this.images.splice(index, 1);\n    },\n    submitBlog() {\n      let formData = new FormData();\n      formData.append(\"title\", this.titleBlog);\n      formData.append(\"content\", this.contentBlog);\n      formData.append(\"pinned\", this.pinnedBlog ? 1 : 0);\n      // formData.append(\"reference\", this.reference);\n      // formData.append(\"start_date\", this.start_date);\n      // formData.append(\"end_date\", this.end_date);\n      formData.append(\"status\", this.statusBlog);\n      this.images.forEach((image) => {\n        formData.append(\"myImage\", image);\n      });\n\n      // Note ***************\n      // ตอนเรายิง Postmant จะใช้ fromData\n      // ตอนยิงหลาย ๆ รูปพร้อมกันใน Postman จะเป็นแบบนี้\n\n      // title   | \"This is a title of blog\"\n      // comment | \"comment in blog\"\n      // ...\n      // myImage | [select file 1]\n      // myImage | [select file 2]\n      // myImage | [select file 3]\n\n      // จะสังเกตุว่าใช้ myImage เป็น key เดียวกัน เลยต้องเอามา loop forEach\n      // พอไปฝั่ง backend มันจะจัด file ให้เป็น Array เพื่อเอาไปใช้งานต่อได้\n\n      axios\n        .post(\"http://localhost:3000/blogs\", formData)\n        .then((res) => this.$router.push({name: 'home'}))\n        .catch((e) => console.log(e.response.data));\n    },\n  },\n};\n</script>\n\n<style>\n</style>"]}]}